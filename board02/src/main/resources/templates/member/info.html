<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head::head(title='마이페이지')}"></head>
<body class="bg-gray-50">

<header th:replace="~{fragments/header}"></header>

<!-- 메인 컨테이너: 좌우 여백 확보 -->
<div class="max-w-5xl mx-auto mt-10 px-4 space-y-12">

    <!-- 내가 쓴 글 섹션 -->
    <section class="bg-white shadow-xl rounded-xl p-8">
        <h2 class="text-2xl font-bold border-b-2 border-gray-200 pb-3 mb-6">내가 쓴 글</h2>
        <div class="overflow-x-auto">
            <table class="table table-zebra w-full border border-base-300 rounded-lg shadow">
                <thead class="bg-gray-100">
                <tr>
                    <th class="text-center">ID</th>
                    <th>제목</th>
                    <th>글쓴이</th>
                    <th class="text-center">날짜</th>
                    <th class="text-center">조회수</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="item:${boardUserIDList}" class="hover:bg-gray-50">
                    <td class="text-center">
                        <a th:href="@{../board/{id}/detail(id=${item.id})}" class="link link-primary"
                           th:text="${item.id}"></a>
                    </td>
                    <td>
                        <a th:href="@{../board/{id}/detail(id=${item.id})}" class="link link-hover">
                            <span th:text="${item.title}"></span>
                            <span th:if="${item.secretValue=='Y'}" class="text-red-500 font-bold"> 🔒</span>
                        </a>
                    </td>
                    <td th:text="${item.writer_name}"></td>
                    <td class="text-center" th:text="${item.regdate}"></td>
                    <td class="text-center" th:text="${item.hit}"></td>
                </tr>
                </tbody>

            </table>
            <!-- 페이징 -->
            <!-- 페이징 -->
            <nav class="my-5 flex justify-center">
                <div class="mt-4 flex justify-center items-center gap-2">
                    <form th:action="@{/member/info}" method="get">
                        <input type="hidden" name="page" th:value="${pageDto.page}">
                        <button class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition"
                                type="submit" name="move" value="-10"
                                th:disabled="${pageDto.page <= 1}">
                            이전
                        </button>
                        <span class="mx-2 text-sm text-gray-700"
                              th:text="'페이지 ' + ${pageDto.page} + ' / ' + ${totalPages}"></span>
                        <button class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 transition"
                                type="submit" name="move" value="10"
                                th:disabled="${pageDto.page >= totalPages}">
                            다음
                        </button>
                    </form>
                </div>
            </nav>
<!--            <div>-->
<!--                <a th:href="@{../member/info(page=${currentPage - size})}">이전</a>-->
<!--            </div>-->

<!--            <div>-->
<!--                <a th:href="@{../member/info(page=${currentPage + size})}">다음</a>-->
<!--            </div>-->
        </div>
    </section>

    <!-- 회원 정보 섹션 -->
    <section class="bg-white shadow-xl rounded-xl p-8">
        <h2 class="text-2xl font-bold border-b-2 border-gray-200 pb-3 mb-6">회원 정보</h2>
        <div class="flex flex-col gap-3 text-lg">
            <div><span class="font-semibold">아이디:</span> <span th:text="${session.loggedMember.userID}"></span></div>
            <div><span class="font-semibold">이름:</span> <span th:text="${session.loggedMember.userName}"></span></div>
            <div><span class="font-semibold">이메일:</span> <span th:text="${session.loggedMember.userEmail}"></span></div>
        </div>

        <!-- 버튼 그룹 -->
        <div class="flex gap-4 justify-center mt-6">
            <a th:href="@{../member/edit}" class="btn btn-primary flex-1 max-w-xs text-lg">정보수정</a>
            <a th:href="@{../member/delete}" class="btn btn-error flex-1 max-w-xs text-lg">회원탈퇴</a>
        </div>
    </section>
</div>
<div th:replace="~{fragments/footer::footer-sns}"></div>
</body>
</html>
